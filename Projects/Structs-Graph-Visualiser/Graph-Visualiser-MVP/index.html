<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Graph Visualiser MVP Goals
 Animate static edge adding and removal. Bring in anime.js â†’ on second thoughtsâ€¦ letâ€™s not do static edge adding and removal."><title>ðŸŒ± Tim's Dev Wiki</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://wiki.timz.dev//icon.png><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Source+Sans+Pro:wght@400;600;700&family=Fira+Code:wght@400;700&display=swap" rel=stylesheet><link href=https://wiki.timz.dev/styles.f0166864fd6bb1603db547f1f970f84b.min.css rel=stylesheet><link href=https://wiki.timz.dev/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://wiki.timz.dev/js/darkmode.773d76aedcd615c64f644f542d60cb1b.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script src=https://wiki.timz.dev/js/popover.688c5dcb89a57776d7f1cbeaf6f7c44b.min.js></script>
<script src=https://wiki.timz.dev/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://wiki.timz.dev/js/clipboard.de8d8b2221fe27323078cbd76188e364.min.js></script>
<script>const BASE_URL="https://wiki.timz.dev/",fetchData=Promise.all([fetch("https://wiki.timz.dev/indices/linkIndex.6800c2c87a430a62e9b3b87e9d0dd1d1.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://wiki.timz.dev/indices/contentIndex.eaccf59b8e11e26db47e3efce5b59d51.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const n=new URL(BASE_URL),s=n.pathname,o=window.location.pathname,i=s==o;addCopyButtons();const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=i&&!0;drawGraph("https://wiki.timz.dev",t,[{"/Knowledge/Engineering":"#4388cc"},{"/Knowledge/Investing":"#98c379"},{"/Knowledge/Personal-Finance":"#98c379"},{"/Knowledge/Finance":"#FFD700"},{"/Knowledge/Economics":"#FFD700"}],t?{centerForce:1,depth:3,enableDrag:!0,enableLegend:!0,enableZoom:!0,fontSize:.4,linkDistance:1,opacityScale:3,repelForce:.2,scale:1.4}:{centerForce:1,depth:2,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:1,scale:3}),initPopover("https://wiki.timz.dev",!0,!0)},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})}</script><script>window.Million={navigate:e=>window.location.href=e,prefetch:()=>{}},window.addEventListener("DOMContentLoaded",()=>{init(),render()})</script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://wiki.timz.dev/js/search.cf33b507388f3dfd5513a2afcda7af41.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://wiki.timz.dev/js/graph.0ac96ed5ea296a8b1ac03a6eba11878c.js></script><div class=singlePage><header><h1 id=page-title><a href=https://wiki.timz.dev/>ðŸŒ± Tim's Dev Wiki</a></h1><svg tabindex="0" id="search-icon" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg><div class=spacer></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><p class=meta>Last updated September 19, 2022.
<a href=https://github.com/Tymotex/wiki/tree/hugo/content/Projects/Structs%20Graph%20Visualiser/Graph%20Visualiser%20MVP.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details open><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#13th-aug-notes>13th Aug Notes</a></li><li><a href=#14th-aug>14th Aug</a></li><li><a href=#15th-aug>15th Aug</a></li><li><a href=#8th-sep>8th Sep</a></li></ol></nav></details></aside><a href=#graph-visualiser-mvp><h1 id=graph-visualiser-mvp><span class=hanchor arialabel=Anchor># </span>Graph Visualiser MVP</h1></a><p><strong>Goals</strong></p><ul><li><del>Animate static edge adding and removal. Bring in anime.js</del> â†’ on second thoughtsâ€¦ letâ€™s not do static edge adding and removal. Itâ€™s a bit of a hassle and weâ€™d actually want to re-layout the graph since adding a static edge could ruin an otherwise aesthetic planar graph.</li><li><strong>~~Directedness</strong>: need to modify the line SVG for each link to signal direction.~~</li><li><strong>~~Weightedness</strong>: need to add a weight <code>&lt;text></code> element to the midpoint of each link.~~<ul><li>Furthermore, need to be able to change an edge weight.</li></ul></li><li>Integrate the graph visualiser into the codebase. Give typings to everything in the graph visualiser beforehand.</li><li>Animate BFS.</li><li>Be able to animate a matrix data structure (should be pretty easy. Just have an HTML table?). It would be challenging to coordinate and sync (probably needs to be embedded in the svg parent of the visualiser)</li><li>Bring the graph to the Structs codebase.</li><li>Be able to animate a queue. Similar challenges to animating a matrix.</li><li>Animate DFS.</li></ul><p><strong>Issues</strong></p><ul><li>It would be good to add a vertex or edge without reloading the graph.<ul><li>For adding/removing edges without reloading the graph:
Just modify the DOM directly. Donâ€™t bother recreating the graph. Itâ€™s adding a node that is problematic since we donâ€™t know where to put the node statically.</li></ul></li><li>Self-linking nodes. Maybe just donâ€™t support them entirely and treat it as bad user input.</li></ul><p><strong>Ideas</strong></p><ul><li>Add a legend for tracking visited nodes.</li><li>Could be useful to have a split pane UI or just some kind of division.<ul><li>1 pane for the graph.</li><li>1 pane for the supporting data structures which should also be visualised and synced with the graph.</li></ul></li></ul><p><strong>Excellent Resources</strong></p><ul><li><a href=https://wattenberger.com/blog/d3#drawing-svg-shapes rel=noopener>https://wattenberger.com/blog/d3#drawing-svg-shapes</a></li><li><a href=https://wattenberger.com/blog/react-and-d3 rel=noopener>https://wattenberger.com/blog/react-and-d3</a></li><li><a href=https://medium.com/ninjaconcept/interactive-dynamic-force-directed-graphs-with-d3-da720c6d7811 rel=noopener>https://medium.com/ninjaconcept/interactive-dynamic-force-directed-graphs-with-d3-da720c6d7811</a></li><li><a href=https://observablehq.com/@d3/force-directed-graph rel=noopener>https://observablehq.com/@d3/force-directed-graph</a></li><li><a href=https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial rel=noopener>https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial</a></li><li><a href=http://bl.ocks.org/fancellu/2c782394602a93921faff74e594d1bb1 rel=noopener>http://bl.ocks.org/fancellu/2c782394602a93921faff74e594d1bb1</a></li></ul><hr><a href=#13th-aug-notes><h2 id=13th-aug-notes><span class=hanchor arialabel=Anchor># </span>13th Aug Notes</h2></a><p>Main challenge right now is creating the graph layout from an adjacency matrix/list, then being able to add new vertices and edges to it and have the graph re-layout.</p><p>Iâ€™ll just use force-directed layout.</p><p>Nodes connected by an edge are attracted through Hookeâ€™s Law: $F_s=-kx$.</p><p>Nodes are repelled by the repulsive force between them. Coulombâ€™s Law: $F_c=k\frac{q_1 q_2}{r^2}$.</p><p>Iâ€™m using D3 and D3-force to generate the graph on the DOM rather than HTML canvas so that we can query and manipulate the graph the same way we do for the linked list and BST.</p><p><strong>Excellent Resources</strong></p><p><strong>Things to learn</strong></p><p>I need to know the basics of svgs and how to work with them (this would really serve me in general).</p><p>I need to learn the basics of d3.</p><p><strong>Current state</strong>
<img src=https://wiki.timz.dev//Projects/Structs%20Graph%20Visualiser/Graph%20Visualiser%20MVP/first-demo.png width=400 alt="first demo|400"></p><p>When the button is pressed, it selects a node by ID and changes its fill and radius, then it selects a link by ID and changes its fill and radius.</p><p>Every node is assigned an ID and every link is given classnames that they can be queried by. We could make this follow a standard:</p><ul><li>Vertices: <code>id=vertex-n</code>, where n is <code>0, 1, 2 â€¦, numVertices</code></li><li>Edges: <code>class=edge-n-m</code>, where n and m are <code>0, 1, 2 â€¦, numVertices</code><ul><li>In directed graphs, edge-n-m refers to the edge from nâ†’m specifically.</li><li>We need to use classnames since itâ€™s not possible to assign multiple IDs to an edge (we wanted multiple IDs so that edge-n-m and edge-m-n refer to the same element, in the case of undirected graphs).</li></ul></li></ul><p>Following this standard makes it easy to lookup the node/edge on the DOM through an adjacency matrix. For example:</p><p><img src=https://wiki.timz.dev//Projects/Structs%20Graph%20Visualiser/Graph%20Visualiser%20MVP/vertex-edge-query.png width=500 alt="vertex and edge query example|500"></p><p>When we want to highlight the edge between 0 and 1 as part of a BFS animation for example, then we look up row 0 in the matrix, find an outgoing connection to 1, put it into a visit queue, then start the highlight animation on <code>.edge-0-1</code>.</p><p>We can now add a new vertex.</p><p><img src=https://wiki.timz.dev//Projects/Structs%20Graph%20Visualiser/Graph%20Visualiser%20MVP/adding-vertex.png width=400 alt="adding vertex screenshot|400"></p><p>2 problems arise:</p><ol><li>Adding a vertex forcefully reloads the graph since we cannot know where to put the vertex statically. This problem doesnâ€™t exist for vertex removal since we can statically delete the vertex and all its edges.</li><li>Adding an edge forcefully reloads the graph, but this can be worked around by statically inserting the edge. This also works for edge removal.</li></ol><p>Furthermore, when spawning new vertices, they would fly off the screen as youâ€™d expect since there is no link to the new vertex, and so no force is acting to keep the vertex where youâ€™d want it to be.</p><p>Iâ€™m clamping the x and y displacement of nodes to be within the svg parent dimensions following this post:
<a href=https://stackoverflow.com/questions/9573178/d3-force-directed-layout-with-bounding-box rel=noopener>https://stackoverflow.com/questions/9573178/d3-force-directed-layout-with-bounding-box</a>. This prevents the vertex from flying off the screen.</p><p>With this solution however, the vertices will still cluster around the edges, which looks very abnormal. To rectify this, I increased the central force magnitude with <code>forceManyBody</code> and <code>forceCenter</code>. I saw more natural spacing applied with a higher value for <code>forceManyBody</code>.</p><p>Also, as a bonus from using D3 and D3-force, the vertices are all draggable by the user, so they can rearrange the graph however they want.</p><hr><a href=#14th-aug><h2 id=14th-aug><span class=hanchor arialabel=Anchor># </span>14th Aug</h2></a><p>Goals today:</p><ul><li><del>Add a form for highlighting a vertex.</del></li><li><del>Add a form for highlighting an edge.</del></li><li><del>Add a form for inserting a new edge.</del></li><li><del>Add support for directed graphs.</del></li><li><del>Add support for weighted graphs.</del></li><li><del>Try disabling the force animation. See:
<a href=https://stackoverflow.com/questions/47510853/how-to-disable-animation-in-a-force-directed-graph rel=noopener>https://stackoverflow.com/questions/47510853/how-to-disable-animation-in-a-force-directed-graph</a>.</del></li></ul><p>Iâ€™ve added some inputs that add new vertices, edges and highlights existing vertices and edges. These were quite straightforward to implement, they just make small changes to the underlying data structures and apply CSS rules after being selected by document.querySelector.</p><p>I also added the arrowheads for directed graphs, going both 1-way and 2-ways, and I added labels to the midpoint of the links. I learned about <code>&lt;defs></code>, <code>&lt;marker></code> and the attributes: marker-end and marker-start when implementing the arrowheads, taking inspiration from this example:
<a href=http://bl.ocks.org/fancellu/2c782394602a93921faff74e594d1bb1 rel=noopener>http://bl.ocks.org/fancellu/2c782394602a93921faff74e594d1bb1</a>. I simply tweaked the attributes until it would fit the current graph proportions.</p><p><img src=https://wiki.timz.dev//Projects/Structs%20Graph%20Visualiser/Graph%20Visualiser%20MVP/final-first-prototype.png width=400 alt="final first iteration demo|400"></p><hr><a href=#15th-aug><h2 id=15th-aug><span class=hanchor arialabel=Anchor># </span>15th Aug</h2></a><p>Goals today:</p><ul><li><del>Upload Gist of App.jsx, record a video, and tell Dom and Joanna.</del></li></ul><p>Some further ideas for the graph visualiser:</p><ul><li>I think it would be very useful to also animate the supporting data structures for the graph. Eg.
for BFS, we could show an animation for the visit queue and how that changes,
or for Dijkstra we could show the predecessor array and priority queue, etc.</li><li>I also think it&rsquo;d be helpful to show the state of the underlying
graph data structure, ie. the contents of the adjacency matrix and adjacency
list. We wouldn&rsquo;t have to animate this, probably</li></ul><hr><a href=#8th-sep><h2 id=8th-sep><span class=hanchor arialabel=Anchor># </span>8th Sep</h2></a><p>Goals today:</p><ul><li>Get the graph to render inside the visualiser page of Structs.sh</li><li>Parameterise some sizing and force values.</li><li>Get unanimated add vertex and add edge buttons working.</li><li>Get DFS working and animated.</li><li>Record a sample of DFS to share.</li></ul><p>I need to figure out how the BST resets the styling after the animation concludes. I also need to figure out why the attribute animates from black to yellow and note white (the initial fill) to yellow.</p><p><img src=https://wiki.timz.dev//Projects/Structs%20Graph%20Visualiser/Graph%20Visualiser%20MVP/integrated-prototype-demo.png width=700 alt="integrated graph visualiser with dfs|700"></p><hr></article><hr><div class=page-end><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div></div><div id=contact_buttons><footer><ul><li><a href=/>Home</a></li><li><a href=https://timz.dev>timz.dev</a></li><li><a href=https://github.com/Tymotex/wiki>Github</a></li><li><a href=https://www.linkedin.com/in/timz-seng>LinkedIn</a></li></ul><p>Tim Zhang Â© 2022</p></footer></div></div></body></html>