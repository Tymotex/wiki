<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="![[Knowledge/Engineering/Technologies/assets/cypress-wallpaper.png|500]]
Cypress is an [[Knowledge/Engineering/Testing/End To End Testing|end-to-end testing]] library for testing the entirety of a web app, including its frontend and backend, in a way that closely simulates how real users would use the app."><title>Cypress</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://wiki.timz.dev//icon.png><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Source+Sans+Pro:wght@400;600;700&family=Fira+Code:wght@400;700&display=swap" rel=stylesheet><link href=https://wiki.timz.dev/styles.f0166864fd6bb1603db547f1f970f84b.min.css rel=stylesheet><link href=https://wiki.timz.dev/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://wiki.timz.dev/js/darkmode.773d76aedcd615c64f644f542d60cb1b.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script src=https://wiki.timz.dev/js/popover.688c5dcb89a57776d7f1cbeaf6f7c44b.min.js></script>
<script src=https://wiki.timz.dev/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://wiki.timz.dev/js/clipboard.de8d8b2221fe27323078cbd76188e364.min.js></script>
<script>const BASE_URL="https://wiki.timz.dev/",fetchData=Promise.all([fetch("https://wiki.timz.dev/indices/linkIndex.c61e9e87d84697c9de0ce10162aaa488.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://wiki.timz.dev/indices/contentIndex.7fc4a29914c1de129af6aa8916f5af13.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const n=new URL(BASE_URL),s=n.pathname,o=window.location.pathname,i=s==o;addCopyButtons();const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=i&&!0;drawGraph("https://wiki.timz.dev",t,[{"/Knowledge/Engineering":"#4388cc"},{"/Knowledge/Investing":"#98c379"},{"/Knowledge/Personal-Finance":"#98c379"},{"/Knowledge/Finance":"#FFD700"},{"/Knowledge/Economics":"#FFD700"}],t?{centerForce:1,depth:3,enableDrag:!0,enableLegend:!0,enableZoom:!0,fontSize:.4,linkDistance:1,opacityScale:3,repelForce:.2,scale:1.4}:{centerForce:1,depth:2,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:1,scale:3}),initPopover("https://wiki.timz.dev",!0,!0)},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})}</script><script>window.Million={navigate:e=>window.location.href=e,prefetch:()=>{}},window.addEventListener("DOMContentLoaded",()=>{init(),render()})</script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://wiki.timz.dev/js/search.cf33b507388f3dfd5513a2afcda7af41.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://wiki.timz.dev/js/graph.0ac96ed5ea296a8b1ac03a6eba11878c.js></script><div class=singlePage><header><h1 id=page-title><a href=https://wiki.timz.dev/>ðŸŒ± Tim's Dev Wiki</a></h1><svg tabindex="0" id="search-icon" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg><div class=spacer></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Cypress</h1><p class=meta>Last updated September 16, 2022.</p><ul class=tags></ul><aside class=mainTOC><details open><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><ol><li><a href=#writing-tests>Writing Tests</a></li><li><a href=#api>API</a></li><li><a href=#aliases>Aliases</a></li><li><a href=#fixtures>Fixtures</a></li><li><a href=#reusuable-custom-commands>Reusuable Custom Commands</a></li><li><a href=#mocking-network-requests>Mocking Network Requests</a></li><li><a href=#seeding-the-database>Seeding the Database</a></li><li><a href=#cypress-cli>Cypress CLI</a></li><li><a href=#cypress-ci>Cypress CI</a></li></ol></li></ol></nav></details></aside><p><img src=/Knowledge/Engineering/Technologies/assets/cypress-wallpaper.png width=500></p><p>Cypress is an <a href=/Knowledge/Engineering/Testing/End-To-End-Testing rel=noopener class=internal-link data-src=/Knowledge/Engineering/Testing/End-To-End-Testing>end-to-end testing</a> library for testing the entirety of a web app, including its frontend and backend, in a way that closely simulates how real users would use the app. It also has an API for writing <a href=/Knowledge/Engineering/Testing/Integration-Testing rel=noopener class=internal-link data-src=/Knowledge/Engineering/Testing/Integration-Testing>integration tests</a> and <a href=/Knowledge/Engineering/Testing/Unit-Testing rel=noopener class=internal-link data-src=/Knowledge/Engineering/Testing/Unit-Testing>unit tests</a>.</p><p>Cypress tests aim to simulate the user experience as closely as possible. This means that tests you write will usually start up a real browser process, navigate to the URL of your web app, then execute a series of user interactions (eg. clicking on links, buttons, sending keystrokes, etc.) and let you make assertions on how the document should respond and what its contents should have.</p><p>The purpose of end-to-end testing this way is to give you confidence that the user can perform critical actions without error. For example, you might have a test that verifies your web app&rsquo;s authentication system, the purchase of an item, the sending of a message, etc. Unit tests with <a href=/Knowledge/Engineering/Technologies/Jest rel=noopener class=internal-link data-src=/Knowledge/Engineering/Technologies/Jest>Knowledge/Engineering/Technologies/Jest</a>, for example, wouldn&rsquo;t be sufficient for that purpose.</p><a href=#writing-tests><h3 id=writing-tests><span class=hanchor arialabel=Anchor># </span>Writing Tests</h3></a><p>In general, the <a href=/Knowledge/Engineering/Testing/Arrange-Act-Assert rel=noopener class=internal-link data-src=/Knowledge/Engineering/Testing/Arrange-Act-Assert>arrange, act, assert</a> pattern for writing unit tests is also a useful way to structure e2e Cypress tests.</p><a href=#example><h4 id=example><span class=hanchor arialabel=Anchor># </span>Example</h4></a><p>A simple test suite I wrote for my portfolio website.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=nx>describe</span><span class=p>(</span><span class=s2>&#34;Portfolio page tests&#34;</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>beforeEach</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// A wait exists just to allow for page-load animations to complete.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>cy</span><span class=p>.</span><span class=nx>visit</span><span class=p>(</span><span class=s2>&#34;/&#34;</span><span class=p>).</span><span class=nx>wait</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>it</span><span class=p>(</span><span class=s2>&#34;should render the about page after the &#39;about&#39; link is clicked&#34;</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Click &#39;About&#39; from the homepage.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>cy</span><span class=p>.</span><span class=nx>contains</span><span class=p>(</span><span class=s2>&#34;About&#34;</span><span class=p>).</span><span class=nx>click</span><span class=p>().</span><span class=nx>wait</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// The window should show and the URL should change.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>cy</span><span class=p>.</span><span class=nx>url</span><span class=p>().</span><span class=nx>should</span><span class=p>(</span><span class=s2>&#34;include&#34;</span><span class=p>,</span> <span class=s2>&#34;/about&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>cy</span><span class=p>.</span><span class=nx>contains</span><span class=p>(</span><span class=s2>&#34;Who am I?&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Note</strong>: <code>describe</code> and <code>it</code> are sourced from
<a href=https://mochajs.org/ rel=noopener>Mocha</a> and <code>expect</code> is sourced from
<a href=https://www.chaijs.com/ rel=noopener>Chai</a>, two core dependencies of Cypress. Also, Mocha provides <code>context</code> which is just an alias for <code>describe</code>.</p><a href=#api><h3 id=api><span class=hanchor arialabel=Anchor># </span>API</h3></a><p>See
<a href=https://docs.cypress.io/api/table-of-contents rel=noopener>Cypress API Documentation</a>. You&rsquo;ll be frequently chaining many methods together in a single statement.</p><ul><li>Methods like <code>cy.get</code> return a DOM element that can be further chained with methods like <code>type</code>, <code>click</code>, <code>contains</code>, etc.</li><li>Some methods like <code>cy.clearCookies</code> do not yield anything that you can chain further methods on.</li></ul><p><strong>Top-Level Methods</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=nx>cy</span><span class=p>.</span><span class=nx>visit</span><span class=p>(</span><span class=nx>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>cy</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=nx>cssSelector</span><span class=p>)</span>    <span class=c1>// This works just like jQuery&#39;s `$()` selector. In fact, jQuery is one of Cypress&#39; dependencies.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>cy</span><span class=p>.</span><span class=nx>url</span><span class=p>()</span>               <span class=c1>// Gets the current URL as a string.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>cy</span><span class=p>.</span><span class=nx>wait</span><span class=p>(</span><span class=nx>milliseconds</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>cy</span><span class=p>.</span><span class=nx>wrap</span><span class=p>(</span><span class=nx>subject</span><span class=p>)</span>       <span class=c1>// Yields the given subject. Useful for resolving promises or repeating tests using the same
</span></span></span><span class=line><span class=cl><span class=c1></span>                       <span class=c1>// array containing test data.
</span></span></span></code></pre></td></tr></table></div></div><p><strong>Note</strong>: all of these <code>cy.*</code> statements execute asynchronously.</p><p><strong>Chained Methods</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>elem</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>...)</span>        <span class=c1>// You can access the &#39;subject&#39; inside `then`. You&#39;d chain this with `cy.get`, for example.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>.</span><span class=nx>should</span><span class=p>(</span><span class=nx>chainer</span>: <span class=kt>string</span><span class=p>)</span>    <span class=c1>// Make an assertion. 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>.</span><span class=nx>and</span><span class=p>(</span><span class=nx>chainer</span>: <span class=kt>string</span><span class=p>)</span>       <span class=c1>// An alias for `should`.
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// Input methods:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>.</span><span class=kr>type</span><span class=p>(</span><span class=nx>text</span>: <span class=kt>string</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>submit</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>click</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p>The <code>chainer</code> argument is a stringified <em>chainer</em> from
<a href=https://docs.cypress.io/guides/references/assertions#Chai rel=noopener>Chai</a>,
<a href=https://docs.cypress.io/guides/references/assertions#Chai-jQuery rel=noopener>Chai-jQuery</a>,
<a href=https://docs.cypress.io/guides/references/assertions#Sinon-Chai rel=noopener>Sinon-Chai</a>, which are dependencies of Cypress.</p><a href=#aliases><h3 id=aliases><span class=hanchor arialabel=Anchor># </span>Aliases</h3></a><p>You must always chain commands off of an invocation on <code>cy.*</code> otherwise commands won&rsquo;t be properly enqueued. Eg. if you&rsquo;re doing <code>const elem = cy.get(...); elem.then(...)</code>, then you need to use an alias instead, as shown below.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=nx>cy</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=s1>&#39;.blog&#39;</span><span class=p>).</span><span class=kr>as</span><span class=p>(</span><span class=s1>&#39;blog&#39;</span><span class=p>);</span>  <span class=c1>// Create the &#39;blog&#39; alias.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>cy</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=s1>&#39;@blog&#39;</span><span class=p>);</span>             <span class=c1>// Retrieve the subject that &#39;blog&#39; is assigned to.
</span></span></span></code></pre></td></tr></table></div></div><a href=#fixtures><h3 id=fixtures><span class=hanchor arialabel=Anchor># </span>Fixtures</h3></a><p>In Cypress, <em>fixtures</em> are a collection of static test data that can be used by tests. They&rsquo;re located at <code>cypress/fixtures</code> and are typically .json files, but can also be .js, image files, etc. The common usage of fixtures is in <a href=/Knowledge/Engineering/Technologies/Cypress#mocking-network-requests rel=noopener class=internal-link data-src=/Knowledge/Engineering/Technologies/Cypress>stubbing network requests</a>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// Loads `cypress/fixtures/blogs.json` and uses it as the response
</span></span></span><span class=line><span class=cl><span class=c1>// when an API endpoint is hit.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>cy</span><span class=p>.</span><span class=nx>fixtures</span><span class=p>(</span><span class=s1>&#39;blogs&#39;</span><span class=p>).</span><span class=kr>as</span><span class=p>(</span><span class=s1>&#39;blogsJson&#39;</span><span class=p>).</span><span class=nx>then</span><span class=p>((</span><span class=nx>blogs</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>cy</span><span class=p>.</span><span class=nx>intercept</span><span class=p>(</span><span class=s1>&#39;GET&#39;</span><span class=p>,</span> <span class=s1>&#39;/blogs&#39;</span><span class=p>,</span> <span class=nx>blogs</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><a href=#reusuable-custom-commands><h3 id=reusuable-custom-commands><span class=hanchor arialabel=Anchor># </span>Reusuable Custom Commands</h3></a><p>Cypress gives you many useful <a href=/Knowledge/Engineering/Technologies/Cypress#api rel=noopener class=internal-link data-src=/Knowledge/Engineering/Technologies/Cypress>commands</a>, however you might need some custom reusable helper functions to help with stubbing network requests, for example. You define custom helpers in <code>cypress/support/commands.ts</code> by doing the following:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=nx>Cypress</span><span class=p>.</span><span class=nx>Commands</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=s2>&#34;helperName&#34;</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>This makes your helpers available under the <code>cy</code> object, eg. from the above example, we&rsquo;d be able to access <code>cy.helperName()</code> from any test.</p><a href=#mocking-network-requests><h3 id=mocking-network-requests><span class=hanchor arialabel=Anchor># </span>Mocking Network Requests</h3></a><p>Often, you&rsquo;ll want to test the frontend independently of the backend, that is, you might not actually want your frontend to make requests to your backend server. You can do this by stubbing API requests with responses using
<a href=https://docs.cypress.io/api/commands/intercept rel=noopener><code>cy.intercept</code></a>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=nx>cy</span><span class=p>.</span><span class=nx>intercept</span><span class=p>(</span><span class=s1>&#39;GET&#39;</span><span class=p>,</span> <span class=s1>&#39;/blogs&#39;</span><span class=p>,</span> <span class=p>[{</span> <span class=p>...</span> <span class=p>},</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}])</span>
</span></span></code></pre></td></tr></table></div></div><a href=#tradeoffs><h4 id=tradeoffs><span class=hanchor arialabel=Anchor># </span>Tradeoffs</h4></a><p>When you stub network requests, you&rsquo;re no longer writer &rsquo;true&rsquo; end-to-end tests. Your tests are more isolated and generally less flaky since it has fewer points of failure, however you are straying away from testing the real user experience.</p><p>If you write true end-to-end tests, then:</p><ul><li>If you have a database, you&rsquo;d have to seed it to generate state.</li><li>Tests are possibly much slower since they&rsquo;ll actually go through the full backend request-handling logic.</li><li>It&rsquo;ll be hard to test for edge cases like network failure.</li></ul><p>It&rsquo;s recommended to maintain a balance of both stubbed tests and true end-to-end tests (especially for the <em>critical user actions</em> in your application like authentication).</p><a href=#seeding-the-database><h3 id=seeding-the-database><span class=hanchor arialabel=Anchor># </span>Seeding the Database</h3></a><a href=#cypress-cli><h3 id=cypress-cli><span class=hanchor arialabel=Anchor># </span>Cypress CLI</h3></a><p>The Cypress package ships with a powerful CLI.
<a href=https://docs.cypress.io/guides/guides/command-line rel=noopener>Official reference</a>.</p><p>Some basic commands to know and consider adding to the NPM scripts inside <code>package.json</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cypress open                                       <span class=c1># Opens Cypress&#39; Electron binary.</span>
</span></span><span class=line><span class=cl>cypress run --headed --no-exit --browser chrome    <span class=c1># Opens a Chrome browser to run Cypress tests.</span>
</span></span><span class=line><span class=cl>cypress run --browser chrome                       <span class=c1># Runs Cypress tests in a headless Chrome process.</span>
</span></span></code></pre></td></tr></table></div></div><a href=#cypress-ci><h3 id=cypress-ci><span class=hanchor arialabel=Anchor># </span>Cypress CI</h3></a><p>I used the GitHub Actions workflow YAML file
<a href=https://docs.cypress.io/guides/continuous-integration/github-actions rel=noopener>provided by the official docs</a> to run Cypress in a CI pipeline.</p></article><hr><div class=page-end><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/ data-ctx=Cypress data-src=/ class=internal-link>Tim's Dev Wiki</a></li><li><a href=/Knowledge/Engineering/Testing/Arrange-Act-Assert/ data-ctx=Cypress data-src=/Knowledge/Engineering/Testing/Arrange-Act-Assert class=internal-link>Arrange, Act, Assert</a></li></ul></div></div><div id=contact_buttons><footer><ul><li><a href=/>Home</a></li><li><a href=https://timz.dev>timz.dev</a></li><li><a href=https://github.com/Tymotex/wiki>Github</a></li><li><a href=https://www.linkedin.com/in/timz-seng>LinkedIn</a></li></ul><p>Tim Zhang Â© 2023</p></footer></div></div></body></html>